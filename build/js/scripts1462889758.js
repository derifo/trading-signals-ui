"use strict";angular.module("app",["ngAnimate","ngMessages","ngResource","ngTouch","ngRoute","smart-table","ui.router","toastr","chart.js","daterangepicker","countUpModule","angular-loading-bar","app.common.services","app.common.directives","app.states.layout","app.states.charts","app.core.customers","app.core.security"]).config(["$httpProvider","$stateProvider","$urlRouterProvider",function(a,r,e){r.state("app",{url:"/","abstract":!0}),a.defaults.useXDomain=!0,a.defaults.withCredentials=!0,delete a.defaults.headers.common["X-Requested-With"],a.defaults.headers.common={},a.defaults.headers.post={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},a.defaults.headers.put={},a.defaults.headers.patch={},a.defaults.transformRequest=function(a){return void 0===a?a:$.param(a)},e.otherwise("/")}]).run(["$http","$state",function(a,r){a.defaults.transformResponse.unshift(function(a,e,n){return 401==n&&"app.security.login"!=r.current.name&&r.go("app.security.login"),a}),a.appendTransform=function(r){return r=angular.isArray(r)?r:[r],r.concat(a.defaults.transformResponse)}}]),angular.module("app.common.filters",[]),angular.module("app.common.directives",[]),angular.module("app.common.services",["ngResource"]),angular.module("app.states.charts",[]),angular.module("app.states.layout",["ui.router"]).config(["$stateProvider",function(a){a.state("app.customers",{url:"","abstract":!0,views:{"navbar@":{templateUrl:"app/common/states/layout/navbar/navbar.tpl.html",controller:"app.states.layout.navbarCtrl"}}}),a.state("app.security",{url:"auth/","abstract":!0})}]).run(["$rootScope",function(a){a.image=function(a){return"/images/"+a}}]),angular.module("app.core.customers",["ui.router"]).config(["$stateProvider","ChartJsProvider",function(a,r){a.state("app.customers.breakdown",{url:"",views:{"content@":{templateUrl:"/app/core/customers/breakdown/breakdown.tpl.html",controller:"app.core.customers.breakdownCtrl"},"customerTile@app.customers.breakdown":{templateUrl:"/app/common/states/charts/customers-tile/customers-tile.tpl.html",controller:"app.charts.customersTile"}}}),r.setOptions({responsive:!0,maintainAspectRatio:!1})}]),angular.module("app.core.security",["ui.router"]).config(["$stateProvider",function(a){a.state("app.security.login",{url:"login",views:{"content@":{templateUrl:"/app/core/security/login/login.tpl.html",controller:"app.core.security.loginCtrl"}}})}]),angular.module("app.common.services").factory("tradersAPI",["$resource","$http",function(a,r){return a(sConfig.api+"api/traders/traders",{},{query:{method:"GET",isArray:!0},getSources:{method:"GET",isArray:!0,url:sConfig.api+"api/aff-ui/sources"},save:{method:"POST",params:{id:"@id"}},login:{method:"POST",url:sConfig.api+"api/aff-ui/login"},logout:{method:"POST",url:sConfig.api+"api/aff-ui/logout"}})}]),angular.module("app.common.directives").directive("compareTo",function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(a,r,e,n){n.$validators.compareTo=function(r){return r==a.otherModelValue},a.$watch("otherModelValue",function(){document.activeElement==r[0]&&n.$validate()})}}}),angular.module("app.common.services").constant("userToken",{}),angular.module("app.states.charts").controller("app.charts.customersTile",["$scope",function(a){}]),angular.module("app.states.layout").controller("app.states.layout.navbarCtrl",["$scope","tradersAPI","$state",function(a,r,e){a.logout=function(){r.logout().$promise.then(function(){e.transitionTo("app.security.login")})}}]),angular.module("app.core.customers").controller("app.core.customers.breakdownCtrl",["$scope","tradersAPI","$timeout",function(a,r,e){}]),angular.module("app.core.security").controller("app.core.security.loginCtrl",["$scope","$timeout","tradersAPI","$state",function(a,r,e,n){a.formSubmitted=function(){var r={email:a.credentials.email,password:a.credentials.password};a.submitted=!0,e.login(r).$promise.then(function(r){r.error?a.error="Invalid email or password combination":n.transitionTo("app.customers.breakdown")})}}]);